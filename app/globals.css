@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: dark;

    /* --- Design tokens (small + consistent) --- */
    --bg-0: #05060a;
    --bg-1: #070812;

    --text-0: rgba(255, 255, 255, 0.92);
    --text-1: rgba(255, 255, 255, 0.72);
    --text-2: rgba(255, 255, 255, 0.52);

    --border-0: rgba(255, 255, 255, 0.10);
    --border-1: rgba(255, 255, 255, 0.16);

    --surface-0: rgba(255, 255, 255, 0.030);
    --surface-1: rgba(255, 255, 255, 0.045);
    --surface-2: rgba(255, 255, 255, 0.070);

    /* Accent as RGB triplets so we can do rgba(var(--accent), .2) */
    --accent: 59 130 246;   /* Base-ish blue */
    --accent-2: 99 102 241; /* indigo */
    --accent-3: 34 211 238; /* cyan */

    /* One source of truth for the app background */
    --app-bg:
      radial-gradient(1200px 800px at 10% -10%, rgba(var(--accent), 0.16), transparent 58%),
      radial-gradient(900px 650px at 90% 0%, rgba(16, 185, 129, 0.10), transparent 55%),
      radial-gradient(850px 650px at 52% 110%, rgba(168, 85, 247, 0.10), transparent 58%),
      radial-gradient(1200px 600px at 50% 40%, rgba(255, 255, 255, 0.035), transparent 60%),
      linear-gradient(180deg, var(--bg-0) 0%, var(--bg-1) 45%, var(--bg-0) 100%);
  }

  /* Use min-height (not height) so background covers when page grows. */
  html {
    min-height: 100%;
    background: var(--app-bg);
    background-color: var(--bg-0);
  }

  body {
    /* Allow the page to grow beyond the viewport */
    min-height: 100%;
    height: auto;

    /* Cover dynamic viewport changes on mobile/in-app browsers */
    min-height: 100vh;
    min-height: 100svh;
    min-height: 100dvh;

    @apply font-sans antialiased;
    color: var(--text-0);

    /* Paint background on the scrolling element too (super reliable) */
    background: var(--app-bg);
    background-color: var(--bg-0);

    /* Prevent bottom “host color” peeking in around safe areas */
    padding-bottom: env(safe-area-inset-bottom);

    /* Helps in some in-app browsers */
    overscroll-behavior-y: none;

    text-rendering: optimizeLegibility;
    -webkit-tap-highlight-color: transparent;
  }

  /* Subtle grain/grid overlay (professional: low contrast, not flashy) */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    background-image:
      radial-gradient(rgba(255, 255, 255, 0.035) 1px, transparent 1px);
    background-size: 28px 28px;
    opacity: 0.08;
    mask-image: radial-gradient(closest-side at 50% 35%, #000 0%, transparent 78%);
  }

  /* Nice global defaults */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  ::selection {
    background: rgba(var(--accent), 0.35);
  }

  /* Scrollbars (kept subtle) */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.16) transparent;
  }
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.14);
    border-radius: 999px;
    border: 2px solid rgba(0, 0, 0, 0.35);
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer components {
  /* Container surface */
  .panel {
    @apply relative overflow-hidden rounded-3xl border shadow-2xl;
    border-color: var(--border-0);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.050), rgba(255, 255, 255, 0.022));
    box-shadow:
      0 40px 90px rgba(0, 0, 0, 0.55),
      0 1px 0 rgba(255, 255, 255, 0.10) inset;
    backdrop-filter: blur(14px) saturate(140%);
  }

  .panel::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background:
      radial-gradient(900px 320px at 50% 0%, rgba(168, 85, 247, 0.10), transparent 60%),
      radial-gradient(700px 240px at 15% 0%, rgba(var(--accent), 0.09), transparent 58%),
      radial-gradient(700px 240px at 85% 0%, rgba(16, 185, 129, 0.07), transparent 58%);
  }

  .panel > * {
    position: relative;
  }

  /* Primary card surface */
  .card {
    @apply relative overflow-hidden rounded-2xl border p-4 shadow-lg transition;
    border-color: var(--border-0);
    background: linear-gradient(180deg, var(--surface-1), var(--surface-0));
    box-shadow:
      0 18px 45px rgba(0, 0, 0, 0.38),
      0 1px 0 rgba(255, 255, 255, 0.08) inset;
    backdrop-filter: blur(10px) saturate(140%);
  }

  .card::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background:
      radial-gradient(700px 240px at 15% 0%, rgba(var(--accent), 0.12), transparent 55%),
      radial-gradient(700px 240px at 85% 0%, rgba(16, 185, 129, 0.08), transparent 55%);
    opacity: 0.9;
  }

  .card:hover {
    border-color: var(--border-1);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.060), rgba(255, 255, 255, 0.028));
    transform: translateY(-1px);
  }

  .card > * {
    position: relative;
  }

  /* Compact sub-panels inside cards (token/NFT summaries) */
  .subpanel {
    @apply rounded-2xl border p-3;
    border-color: var(--border-0);
    background: rgba(0, 0, 0, 0.22);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  }

  /* Inputs */
  .input {
    @apply w-full rounded-xl border px-3 py-2 text-xs transition;
    border-color: var(--border-0);
    background: rgba(0, 0, 0, 0.28);
    color: var(--text-0);
    backdrop-filter: blur(8px) saturate(140%);
  }

  .input::placeholder {
    color: rgba(255, 255, 255, 0.30);
  }

  .input:focus-visible {
    outline: none;
    border-color: rgba(var(--accent), 0.55);
    box-shadow:
      0 0 0 4px rgba(var(--accent), 0.20),
      0 1px 0 rgba(255, 255, 255, 0.06) inset;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center rounded-xl px-3 py-2 text-xs font-medium transition;
    @apply disabled:cursor-not-allowed disabled:opacity-60;
  }

  .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 4px rgba(var(--accent), 0.22);
  }

  .btn-primary {
    color: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.14);
    background:
      linear-gradient(135deg,
        rgba(var(--accent), 0.95) 0%,
        rgba(var(--accent-2), 0.92) 45%,
        rgba(var(--accent-3), 0.80) 100%);
    box-shadow:
      0 18px 50px rgba(0, 0, 0, 0.45),
      0 1px 0 rgba(255, 255, 255, 0.18) inset;
  }

  .btn-primary:hover {
    filter: brightness(1.05) saturate(1.08);
  }

  .btn-primary:active {
    transform: translateY(1px);
    filter: brightness(0.98) saturate(1.05);
  }

  .btn-ghost {
    color: rgba(255, 255, 255, 0.84);
    border: 1px solid var(--border-0);
    background: rgba(255, 255, 255, 0.055);
    backdrop-filter: blur(10px) saturate(140%);
  }

  .btn-ghost:hover {
    background: rgba(255, 255, 255, 0.085);
    border-color: var(--border-1);
  }

  .btn-ghost:active {
    transform: translateY(1px);
  }

  /* Metric blocks */
  .metric {
    @apply rounded-xl border px-3 py-2;
    border-color: var(--border-0);
    background: rgba(255, 255, 255, 0.035);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.30);
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-medium;
    backdrop-filter: blur(10px) saturate(140%);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
  }

  /* Links */
  .link {
    @apply underline underline-offset-2;
    text-decoration-color: rgba(255, 255, 255, 0.30);
  }

  .link:hover {
    text-decoration-color: rgba(255, 255, 255, 0.60);
  }
}
